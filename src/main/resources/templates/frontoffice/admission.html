<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Helpad</title>
<link rel="stylesheet" type="text/css"
	href="../static/css/bootstrap.min.css"
	th:href="@{/css/bootstrap.min.css}" />
<link rel="stylesheet" type="text/css" href="../static/css/style.css"
	th:href="@{/css/style.css}" />
<link rel="stylesheet" type="text/css"
	href="../static/assets/css/style.css"
	th:href="@{/assets/css/style.css}">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
</head>
<body>
	<nav
		th:insert="~{ frontoffice/fragmentfrontoffice/templatefrontoffice :: navigation }"></nav>
	<form class="p-2" id="myForm" th:action="@{/sendAdmission}"
		method="post" enctype="multipart/form-data">
		<h1 align=center>Formulaire de demande d'admission</h1>
		<h3 class="text-danger" th:text="${error}"></h3>
		<div style="text-align: center;">
			<span class="step" id="step-1">Identité</span> <span class="step"
				id="step-2">Adresse</span> <span class="step" id="step-3">Candidautres</span>
			<span class="step" id="step-4">Documents</span>
		</div>

		<div class="tab" id="tab-1">
			<p>Identité</p>
			<select name="civilite" id="civilité-select">
				<option value="">Civilité</option>
				<option value="Monsieur">Monsieur</option>
				<option value="Madame">Madame</option>
			</select>
			<div>
				<input type="hidden" name="idPersonne" th:value="${user.idPersonne}">
				<label for="nom"> Nom <span class="text-danger">*</span></label> <input
					type="text" placeholder="DUPONT" name="nom" th:value="${user.nom}"
					required>
			</div>
			<div>
				<label for="prenom">Prénom <span class="text-danger">*</span></label>
				<input type="text" placeholder="Jean" name="prenom"
					th:value="${user.prenom}" required>
			</div>
			<div>
				<label for="email"> Email <span class="text-danger">*</span></label>
				<input type="email" placeholder="dupont.jean@gmail.com" name="email">
			</div>
			<div>
				<label for="telephone">Téléphone<span class="text-danger">*</span></label>
				<input type="text" placeholder="0033700000000" name="telephone"
					required>
			</div>
			<div>
				<label for="dateNaissance">Date naissance <span
					class="text-danger">*</span></label> <br> <span
					id="dateNaissanceError" class="text-danger"></span> <input
					type="date" placeholder="Date naissance" id="dateNaissance"
					name="dateNaissance">
			</div>
			<div class="index-btn-wrapper">
				<button class="index-btn" id="btnDateNaissance" onclick="run(1, 2);">Suivant</button>
			</div>
		</div>

		<div class="tab" id="tab-2">
			<p>Adresse:</p>
			<div>
				<label for="numero"> N° <span class="text-danger">*</span></label> <input
					type="number" placeholder="85" id="numero" name="numero">
			</div>
			<div>
				<label for="rue">Rue <span class="text-danger">*</span></label> <input
					type="text" placeholder="Boulevard de la paris" id="rue" name="rue">
				<div>
					<label for="ville">Ville <span class="text-danger">*</span></label>
					<input type="text" placeholder="Paris" id="ville" name="ville">
				</div>
				<div>
					<label for="codePostal">Code postal <span
						class="text-danger">*</span></label><input type="text" id="codePostal"
						placeholder="75015" name="codePostal">
				</div>
				<div>
					<label for="pays"> Pays <span class="text-danger">*</span></label>
					<input type="text" placeholder="Pays" id="pays" name="pays">
				</div>
				<div class="index-btn-wrapper">
					<div class="index-btn" onclick="run(2, 1);">Précedent</div>
					<div class="index-btn" onclick="run(2, 3);">Suivant</div>
				</div>
			</div>
		</div>
		<div class="tab" id="tab-3">

			<div>
				<label for="dateEntree"> Date entrée souhaite <span
					class="text-danger">*</span></label><br> <span id="dateEntreeError"
					class="text-danger"></span> <input type="date"
					placeholder="Date entrée souhaitée" id="dateEntree"
					name="dateEntree">
			</div>
			<div>
				<label for="dateEntree"> N° sécurité sociale <span
					class="text-danger">*</span></label> <input type="text"
					placeholder="1000000000" name="numeroSecuriteSocial">
			</div>
			<div>
				<label for="numeroDeCaf"> N° de CAF</label> <input type="text"
					placeholder="594326W" name="numeroDeCaf">
			</div>
			<div>
				<label for="revenu"> Revenu annuellement <span
					class="text-danger">*</span></label> <input type="text"
					placeholder="Revenu" name="revenu">
			</div>
			<input type="hidden" name="libelle" value="En cours de traitement" />
			<select name="pathologie" id="pathologie-select" required>
				<option value="">Avez vous des pathologies ?</option>
				<option value="Oui">Oui</option>
				<option value="Non">Non</option>
			</select>
			<div>
				<label class="mt-2" for="informationComplementaire">Des
					informations complémentaires</label><br>
				<textarea class="form-control" id="informationComplementaire"
					name="informationComplementaire" rows="8" cols="1">
				</textarea>
			</div>
			<div class="index-btn-wrapper">
				<div class="index-btn" onclick="run(3, 2);">Précedent</div>
				<button class="index-btn" id="btnDateEntree" onclick="run(3, 4);">Suivant</button>
			</div>
		</div>

		<div class="tab" id="tab-4">
			<p>Piéce justificatifs</p>
			<div>
				<span class="fw-bold text-primary" id="errorMessage"></span> <label
					class="text-primary" for="file1">Photocopie de pièce
					d'identité(JPG,PNG, PDF|max. 2 Mo) <span class="text-danger">*</span>
				</label> <input class="fileInput" type="file" name="file1"
					accept="application/pdf,image/*" required>
			</div>
			<div>
				<span class="fw-bold text-primary" id="errorMessage"></span> <label
					class="text-primary" for="file2">Justificatif de domicile
					(JPG,PNG, PDF|max. 2 Mo) <span class="text-danger">*</span>
				</label> <input class="fileInput" type="file" name="file2"
					accept="application/pdf,image/*" required>
			</div>
			<div>
				<span class="fw-bold text-primary" id="errorMessage"></span> <label
					class="text-primary" for="file3">Attestation d'hébergement
					d'identité(JPG,PNG, PDF|max. 2 Mo) </label> <input class="fileInput"
					type="file" name="file3" accept="application/pdf,image/*">
			</div>
			<div>
				<span class="fw-bold text-primary" id="errorMessage"></span> <label
					class="text-primary" for="file4">Photocopie de pièce
					d'identité de l'hébergeur(JPG,PNG, PDF|max. 2 Mo) </label> <input
					class="fileInput" type="file" name="file4"
					accept="application/pdf,image/*">
			</div>
			<div>
				<label class="text-primary" for="file5">Quitance de loyer
					moins de 3 mois(JPG,PNG, PDF|max. 2 Mo) </label> <input class="fileInput"
					type="file" name="file5" accept="application/pdf,image/*">
			</div>
			<div>
				<label class="text-primary" for="file6">Justificatif de
					situation familiale (JPG,PNG, PDF|max. 2 Mo) <span
					class="text-danger">*</span>
				</label> <input class="fileInput" type="file" name="file6"
					accept="application/pdf,image/*" required>
			</div>
			<div>
				<span class="fw-bold text-primary" id="errorMessage"></span> <label
					class="text-primary" for="file7">Avsi d'imposition
					(JPG,PNG, PDF|max. 2 Mo) <span class="text-danger">*</span>
				</label> <input class="fileInput" type="file" name="file7"
					accept="application/pdf,image/*" required>
			</div>
			<div>
				<span class="fw-bold text-primary" id="errorMessage"></span> <label
					class="text-primary" for="file8">Attestation de droits de
					sécurité social (JPG,PNG, PDF|max. 2 Mo) <span class="text-danger">*</span>
				</label> <input class="fileInput" type="file" name="file8"
					accept="application/pdf,image/*" required>
			</div>
			<div>
				<span class="fw-bold text-primary" id="errorMessage"></span> <label
					class="text-primary" for="file9">Si vous avez des
					pathologies, joindre un justificatif (JPG,PNG, PDF|max. 2 Mo) </label> <input
					class="fileInput" type="file" name="file9"
					accept="application/pdf,image/*">
			</div>
			<div class="index-btn-wrapper">
				<div class="index-btn" onclick="run(4, 3);">Précedent</div>
				<div class="index-btn" onclick="run(4, 5);">Suivant</div>
			</div>
		</div>

		<div class="tab" id="tab-5">
			<div class="index-btn-wrapper">
				<div class="row">
					<div class="col">
						<div class="mt-5">
							<input type="checkbox" value="Je déclare sur l'honneur de
								l'exactitude des informations renseignes" class="form-check-input"
								name="declarationExactitudeDesInformations"
								id="flexCheckDefault" required> <label class="form-check-label"
								for="flexCheckDefault">Je déclare sur l'honneur de
								l'exactitude des informations renseignes</label>
						</div>
						<div>
							<input type="checkbox" value="J'ai lu
								et accepter les conditions générales d'utilisations des données" name="conditionGeneral" class="form-check-input"
								id="flexCheckChecked" checked required> <label
								class="form-check-label" for="flexCheckChecked">J'ai lu
								et accepter les conditions générales d'utilisations des données.
							</label>
						</div>
					</div>
					
				</div>
			</div>
			<div class="mt-3 float-end">
					<div class="btn btn-primary" onclick="run(5, 4);">Précedent</div>
					<button class="btn btn-primary" type="submit"
					>Valider</button>
				</div>
		</div>
		<input type="hidden" th:name="${_csrf.parameterName}"
			th:value="${_csrf.token}" />
	</form>
	<footer
		th:insert="~{ frontoffice/fragmentfrontoffice/templatefrontoffice :: footer }"></footer>
	<script>
		// Default tab
		$(".tab").css("display", "none");
		$("#tab-1").css("display", "block");

		function run(hideTab, showTab) {

			// Progress bar
			for (i = 1; i < showTab; i++) {
				$("#step-" + i).css("opacity", "4");
			}

			// Switch tab
			$("#tab-" + hideTab).css("display", "none");
			$("#tab-" + showTab).css("display", "block");
			$("input").css("background", "#fff");
		}
	</script>
	<script src="../static/js/admissionForm.js"
		th:src="@{/js/admissionForm.js}"></script>
	<!-- 	<script src="../static/js/adresseFormAdmission.js" th:src="@{/js/adresseFormAdmission.js}"></script> -->
</body>
</html>